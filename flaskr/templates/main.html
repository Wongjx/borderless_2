{% extends "base.html" %}

{%block content%}



<!-- Begin Body -->
<!-- pic frame start -->
<div class="container">
        <h1>Welcome {{session.user.login_name}}</h1>
        <!-- Page Heading -->
        <div class="row">
            <div class="col-lg-12">
                <h1 class="page-header">Browse Book!</h1>
                <br><h2>Catalog</h2>
            </div>
        </div>
        <!-- /.row -->
        <div class="row" align="center">
            <h4>Total price : <span id="total_price">0</span></h4>
        </div>

        <div class="row" align="center">
            <form method="POST" id="order_multiple">
            <table id="myTable" class="display" width="100%"></table>
            <button class="btn btn-primary">ORDER NOW!</button>
        </form>
        </div>
       

        
       

        

    </div>
<script type="text/javascript">
$('#advance_search').click(function(){
  $('#advance_search_box').toggle("slow")
});
    
var dataSet=[]
var number=0
{% for book in book_list %}
var each_data=[]

each_data.push("<a href='"+"/book/"+"{{login_name}}"+"/{{book.isbn}}"+"''>{{book.title}}</a>")
each_data.push("{{book.authors}}")
each_data.push("{{book.publisher}}")
each_data.push("{{book.year_of_publication}}")
each_data.push("{{book.quantity_left}}")
each_data.push("{{book.price}}")
each_data.push("{{book.format}}")
each_data.push("{{book.subject}}")
each_data.push("<input type='checkbox' class='book' name='isbn_"+number.toString()+"' value='"+"{{book.isbn}}'>")
number+=1
dataSet.push(each_data)
{% endfor %}
console.log(dataSet)
$('#myTable').DataTable({
        data: dataSet,
        columns: [

            { title: "Title" },
            { title: "Author" },
            { title: "Publisher" },
            { title: "Year of Publication" },
            { title: "Quantity" },
            { title: "Price" },
            { title: "Format" },
            { title: "Genre"},
            { title: "Order Now!"}
        ]
    });
var init_price=0
$(".book").click(function(e){
    test=$(this)
    var price = $(this).parent().siblings()[5].innerHTML
    if($(this).is(":checked")){
        init_price+=parseFloat(price)
    }else{
        init_price-=parseFloat(price)
    };
    $('#total_price').text(init_price)
    console.log("Add")
});


</script>



{%endblock%}
